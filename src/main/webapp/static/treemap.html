<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Cassandra LAN Party</title>

<!-- CSS Files -->
<link type="text/css" href="base.css" rel="stylesheet" />
<link type="text/css" href="treemap.css" rel="stylesheet" />

<!--[if IE]><script language="javascript" type="text/javascript" src="excanvas.js"></script><![endif]-->
<script language="javascript" type="text/javascript" src="jit.js"></script>
</head>

<body onload="init();">
	<div id="container">
		<div id="left-container">
			<div class="text">
				<h4>Cassandra Party</h4> 
			</div>
			<div id="id-list">
				<table>
				    <tr>
				         <td>
				            <label for="r-sd">SliceAndDice </label>
				          </td>
				          <td>
				            <input type="radio" id="r-sd" name="layout"  checked="checked" value="bottom" />
				          </td>
				    </tr>
				    <tr>
				         <td>
				            <label for="r-st">Strip </label>
				         </td>
				         <td>
				            <input type="radio" id="r-st" name="layout" value="top" />
				         </td>
				    <tr>
				        <td>
				            <label for="r-sq">Squarified </label>
				        </td>
				        <td>
				            <input type="radio" id="r-sq" name="layout"value="left" />
				        </td>
				    </tr>
				</table>
			</div>
		</div>
		<div id="center-container">
		    <div id="infovis"></div>    
		</div>
	</div>
<script>
var labelType, useGradients, nativeTextSupport, animate;

function init(){
var json = {
"children": [
{
   "id": "datacenter1", 
   "name": "DC1",
   "data": { "nbMachines": "3", "$color": "blue", "$area": 1}, 
   "children": [
   {
       "id": "dc1rack1", 
       "name": "Rack 1",
       "data": { "nbMachines": "3", "$color": "#8E7032", "$area": 1}, 
       "children": [
       	 {"id": "dc1rack1machine1", "name": "10.5.2.102", "data": { "$color": "red", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc1rack1machine2", "name": "10.5.2.104", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc1rack1machine3", "name": "10.5.2.105", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }}]
 	},
    {
       "id": "dc1rack2", 
       "name": "Rack 2",
       "data": { "nbMachines": "3", "$color": "#8E7032", "$area": 1}, 
       "children": [
       	 {"id": "dc1rack2machine1", "name": "10.5.2.22", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value"}},
	     {"id": "dc1rack2machine2", "name": "10.5.2.29", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc1rack2machine3", "name": "10.5.2.33", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }}
	   ]
 	}
 	]
},
{
   "id": "datacenter2", 
   "name": "DC2",
   "data": { "nbMachines": "1", "$color": "blue", "$area": 1}, 
   "children": [
   {
       "id": "dc2rack1", 
       "name": "Rack 1",
       "data": { "nbMachines": "4", "$color": "#8E7032", "$area": 1}, 
       "children": [
	     {"id": "dc2rack1machine1", "name": "211.9.22.33", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc2rack1machine2", "name": "211.9.22.34", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc2rack1machine3", "name": "211.9.22.35", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc2rack1machine4", "name": "211.9.22.36", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }}
	   ]
 	},
    {
       "id": "dc2rack2", 
       "name": "Rack 2",
       "data": { "nbMachines": "1", "$color": "#8E7032", "$area": 1}, 
       "children": [
	     {"id": "dc2rack2machine1", "name": "211.9.22.23", "data": { "$color": "green", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc2rack2machine2", "name": "211.9.22.24", "data": { "$color": "red", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }},
	     {"id": "dc2rack2machine3", "name": "211.9.22.25", "data": { "$color": "red", "$area": 1, "ip": "ip-value", "dc": "dc-value", "rack": "rack-value", "status": "status-value", "state": "state-value", "load": "load-value", "owns": "owns-value", "token": "token-value" }}
	   ]
	     
 	},
    {
       "id": "dc2rack3", 
       "name": "Rack 3",
       "data": { "nbMachines": "0", "$color": "#8E7032", "$area": 1}, 
       "children": []
 	}
   ]
},
{
   "id": "datacenter3", 
   "name": "DC3",
   "data": { "nbMachines": "0", "$color": "blue", "$area": 1}, 
   "children": [
    {
       "id": "dc3rack1", 
       "name": "Rack 1",
       "data": { "nbMachines": "0", "$color": "#8E7032", "$area": 1}, 
       "children": []
 	},
    {
       "id": "dc3rack2", 
       "name": "Rack 2",
       "data": { "nbMachines": "0", "$color": "#8E7032", "$area": 1}, 
       "children": []
 	},
    {
       "id": "dc3rack3", 
       "name": "Rack 3",
       "data": { "nbMachines": "0", "$color": "#8E7032", "$area": 1}, 
       "children": []
 	}]
}
],
"data": {}, 
"id": "datacenters", 
"name": "Datacenters"
};
  //end
  //init TreeMap
  var tm = new $jit.TM.Squarified({
    injectInto: 'infovis',
    titleHeight: 15,
    animate: animate,
    offset: 1,
    Events: {
      enable: true,
      onClick: function(node) {
        if(node) tm.enter(node);
      },
      onRightClick: function() {
        tm.out();
      }
    },
    duration: 1000,
    //Enable tips
    Tips: {
      enable: true,
      //add positioning offsets
      offsetX: 20,
      offsetY: 20,
      onShow: function(tip, node, isLeaf, domElement) {
        var html = "<div class=\"tip-title\"><h4>" + node.name 
          + "</h4></div><br/>";
        var data = node.data;
        if(data.playcount) {
          html += "play count: " + data.playcount + "<br/>";
        }
        if(data.nbMachines) {
          html += "nbMachines: " + data.nbMachines + "<br/>";
        }
        if (data.ip) {
          html += "ip: " + data.ip + "<br/>";
        }
        if (data.token) {
          html += "token: " + data.token + "<br/>";
        }
        if (data.owns) {
          html += "Owns: " + data.owns + "<br/>";
        }
        if (data.load) {
          html += "Load: " + data.load + "<br/>";
        }
        
        tip.innerHTML =  html; 
      }  
    },
    onCreateLabel: function(domElement, node){
        domElement.innerHTML = node.name;
        var style = domElement.style;
        style.display = '';
        style.border = '1px solid transparent';
        domElement.onmouseover = function() {
          style.border = '1px solid #9FD4FF';
        };
        domElement.onmouseout = function() {
          style.border = '1px solid transparent';
        };
    }
  });
  tm.loadJSON(json);
  var util = $jit.util;
  util.extend(tm, new $jit.Layouts.TM.SliceAndDice);
  tm.layout.orientation = "v";
  tm.refresh();
  
  //end
  //add events to radio buttons
  var sq = $jit.id('r-sq'),
      st = $jit.id('r-st'),
      sd = $jit.id('r-sd');
  util.addEvent(sq, 'change', function() {
    if(!sq.checked) return;
    util.extend(tm, new $jit.Layouts.TM.Squarified);
    tm.refresh();
  });
  util.addEvent(st, 'change', function() {
    if(!st.checked) return;
    util.extend(tm, new $jit.Layouts.TM.Strip);
    tm.layout.orientation = "v";
    tm.refresh();
  });
  util.addEvent(sd, 'change', function() {
    if(!sd.checked) return;
    util.extend(tm, new $jit.Layouts.TM.SliceAndDice);
    tm.layout.orientation = "v";
    tm.refresh();
  });
  //add event to the back button
  var back = $jit.id('back');
  $jit.util.addEvent(back, 'click', function() {
    tm.out();
  });
}

</script>
</body>
</html>
